var TWP=window.TWP||{};TWP.version="1.0.0";TWP.debug=false;TWP.Data=TWP.Data||{};TWP.Objs=TWP.Objs||{};TWP.registry=[];TWP.namespace=function(B){if(!B||!B.length){return null;}var D=B.split(".");var C=TWP;for(var A=(D[0]=="TWP")?1:0;A<D.length;++A){C[D[A]]=C[D[A]]||{};C=C[D[A]];}return C;};TWP.createObject=function(A){var B=function(){};B.prototype=A||{};return new B();};TWP.extend=function(B){var A=function(){};A.prototype=B||{};return new A();};TWP.memoize=function(){};TWP.register=function(B,A){if(!this.registry[B]){this.registry[B]={};}var C=this.registry[B];C.name=B;C.objClass=A;TWP.log(B+" added to registry.");};TWP.get=function(B){var A=TWP.registry[B].objClass;if(typeof A=="object"){return A;}return new A();};TWP.requestDebug=function(){if(window.location.href.indexOf("debug=true")!=-1){this.debug=true;}};TWP.showInfo=function(){};TWP.log=function(A,B,D){if(arguments.length===1){B=arguments[0];A=this.debug;}else{if(arguments.length===2){if(typeof A!=="boolean"){B=arguments[0];D=arguments[1];A=this.debug;}}}try{if(window.console&&A){if(D){console.log(B+" %o",D);}else{console.log(B);}}}catch(C){}};if(typeof wp_meta_data=="object"&&wp_meta_data.isHomepage){TWP.hpRefreshTests=TWP.hpRefreshTests||{};}TWP.requestDebug();TWP.namespace("Util");TWP.namespace("Constants");TWP.namespace("StaticMethods");TWP.namespace("Plugin");TWP.namespace("Page");TWP.namespace("Module");TWP.namespace("Modules");TWP.namespace("Events");TWP.namespace("Article");TWP.namespace("Epaper");TWP.namespace("Email");TWP.namespace("HSS");(function(){TWP=window.TWP||{};TWP.Constants=TWP.Constants||{};TWP.Constants.AllowDocwrite=TWP.Constants.AllowDocwrite||{};TWP.Constants.AllowDocwrite.IN_ADS=false;TWP.Constants.AllowDocwrite.IN_PIGGYBACK=false;TWP.Constants.AllowDocwrite.IN_OTTO=true;})();(function(){TWP=window.TWP||{};TWP.StaticMethods=TWP.StaticMethods||{};TWP.StaticMethods.addCss=function(B){var C=document.getElementsByTagName("head");if(C.length){var A=document.createElement("style");A.type="text/css";if(A.styleSheet){A.styleSheet.cssText=B;}else{A.appendChild(document.createTextNode(B));}C[0].appendChild(A);}};TWP.StaticMethods.addScript=function(B,D){var E=("https:"==document.location.protocol)?D:B;var C=document.getElementsByTagName("head");if(E&&C.length){var A=document.createElement("script");A.type="text/javascript";A.src=E;C[0].appendChild(A);}};TWP.StaticMethods.prependBodyHTML=function(C,D){D=(!isNaN(D)&&D>=0)?Math.floor(D):10;var A=document.getElementsByTagName("body");if(A.length){A=A[0];if(A.childNodes[0]){var E=document.createElement("div");E.innerHTML=C;for(var B=E.childNodes.length-1;B>=0;B--){A.insertBefore(E.childNodes[B],A.childNodes[0]);}}else{setTimeout(function(){TWP.StaticMethods.prependBodyHTML(C);},D);}}else{setTimeout(function(){TWP.StaticMethods.prependBodyHTML(C);},D);}};TWP.StaticMethods.tokenize=function(A,B){B=B||"_";return A.toLowerCase().replace(/^\s+|\s+$/g,"").replace(/[^a-z0-9_\-\s]/g,"").replace(/\s+/g,B);};TWP.StaticMethods.getUniqueNumber=function(){var A="";A+=""+Math.floor(Math.random()*1000000);A+=""+new Date().getTime();return A;};TWP.StaticMethods.getUniqueToken=function(A){A=TWP.StaticMethods.tokenize(A||"twp");A=A.replace(/^(\d|_|-)+/,"")||"twp";return A+"_"+TWP.StaticMethods.getUniqueNumber();};TWP.StaticMethods.getDefaultFontObject=function(B){var A={},C=3/32;switch(B){case"%":A={size:100,nudge:10};break;case"in":A={size:C,nudge:1/64};break;case"cm":A={size:2.54*C,nudge:2.54/64};break;case"mm":A={size:25.4*C,nudge:25.4/64};break;case"pt":A={size:72*C,nudge:72/64};break;case"pc":A={size:72*C/12,nudge:72/(8*64)};break;case"px":A={size:11,nudge:2};break;case"ex":A={size:1,nudge:0.1};break;case"em":A={size:1,nudge:0.1};break;case"rem":A={size:1,nudge:0.1};break;default:A={size:1,nudge:0.1};}return A;};TWP.StaticMethods.incrementFontSize=function(A,B){TWP.StaticMethods.adjustFontSize(A,jQuery.extend({decrement:false},B));};TWP.StaticMethods.decrementFontSize=function(A,B){TWP.StaticMethods.adjustFontSize(A,jQuery.extend({decrement:true},B));};TWP.StaticMethods.adjustFontSize=function(A,B){B=B||{};jQuery(A).each(function(F,J){var E=!!B.forcePx,G=(E)?jQuery(J).css("font-size"):J.style.fontSize,H=(G.match(/([^0-9]+)$/i))?RegExp.$1:"em",C=(!B.decrement);defaultFontObject=TWP.StaticMethods.getDefaultFontObject(H);var D=Math.abs((isNaN(parseFloat(B.nudge)))?defaultFontObject.nudge:parseFloat(B.nudge));if(!C){D=-1*D;}var I=(isNaN(parseFloat(G))?defaultFontObject.size:parseFloat(G))+D;if(I>0||D>0){J.style.fontSize=(E)?jQuery(J).css("font-size",I+H):I+H;}});};TWP.StaticMethods.areCookiesEnabled=function(){var A=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!A){document.cookie="testcookie";A=(document.cookie.indexOf("testcookie")!=-1)?true:false;}return(A);};TWP.StaticMethods.getCookie=function(B){var D=B+"=";var A=document.cookie.split(";");for(var C=0;C<A.length;C++){var E=A[C];while(E.charAt(0)==" "){E=E.substring(1,E.length);}if(E.indexOf(D)==0){return E.substring(D.length,E.length);}}return null;};TWP.StaticMethods.setCookie=function(B,D,A,F,C,E){document.cookie=B+"="+escape(D)+(A?"; expires="+A:"")+(F?"; path="+F:"; path=/")+(C?"; domain="+C:"; domain="+(/(?:[^\.]+)(\.([^\.]+\.){1,}[^\.]+)$/.test(document.location.host)?RegExp.$1:document.location.host))+(E?"; secure":"");};TWP.StaticMethods.deleteCookie=function(A,C,B){if(TWP.StaticMethods.getCookie(A)){document.cookie=A+"="+((C)?"; path="+C:"/")+((B)?"; domain="+B:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT";}};TWP.StaticMethods.getCountingCookie=TWP.StaticMethods.getIntegerCookie||function(B){var C=0;if(!!B&&TWP.StaticMethods.areCookiesEnabled()){var A=TWP.StaticMethods.getCookie(B);C=!isNaN(parseInt(A))?parseInt(A):0;C=(C<0)?0:C;}return C;};TWP.StaticMethods.incrementCountingCookie=TWP.StaticMethods.incrementCountingCookie||function(B,A){if(!!B){A=A||{};TWP.StaticMethods.setCookie(B,TWP.StaticMethods.getCountingCookie(B)+1,A.expires,A.path,A.domain,A.secure);}};TWP.StaticMethods.getFlagCookie=TWP.StaticMethods.getFlagCookie||function(C){var A=0;if(!!C&&TWP.StaticMethods.areCookiesEnabled()){var B=TWP.StaticMethods.getCookie(C);A=!isNaN(parseInt(B))?parseInt(B):0;A=(A<0)?0:A;}return(A%2);};TWP.StaticMethods.toggleFlagCookie=TWP.StaticMethods.toggleFlagCookie||function(B,A){if(!!B){A=A||{};TWP.StaticMethods.setCookie(B,(TWP.StaticMethods.getFlagCookie(B)+1)%2,A.expires,A.path,A.domain,A.secure);}};TWP.StaticMethods.initCommentCount=function(C,A){var D="http://echoapi.wpdigital.net/v1/count?q=(childrenof:'{guid}'"+encodeURI("source:washpost.com (((state:Untouched user.state:ModeratorApproved) OR (state:CommunityFlagged,ModeratorApproved,ModeratorDeleted -user.state:ModeratorBanned,ModeratorDeleted) )))"+" children: 1 (((state:Untouched user.state:ModeratorApproved) OR (state:CommunityFlagged,ModeratorApproved -user.state:ModeratorBanned,ModeratorDeleted) ) )"+"&appkey="+((TWP.Data.echo_appkey!="undefined")?TWP.Data.echo_appkey:"dev.washpost.com"));var B;C=(typeof C=="undefined")?"div.comment-bubble-small":C;$(C).each(function(E,G){var F=A||$(G).attr("guid")||$(G).attr("data");if(typeof F!="undefined"){B=D.replace("{guid}",F);TWP.StaticMethods.getCommentCount(B,G);}});};TWP.StaticMethods.getCommentCount=function(B,A){var C=window.setTimeout(function(){TWP.StaticMethods.getCommentCount(B,A);},5000);jQuery.ajax({url:B,dataType:"jsonp",cache:false,context:A}).done(function(E,D){if(D!="error"){if(typeof E.count!="undefined"){$(A).html(E.count);}else{if(E.errorCode=="more_than"){$(A).html("5000+");}}window.clearTimeout(C);}});};TWP.Util=TWP.Util||{};TWP.Util.initCommentCount=TWP.StaticMethods.initCommentCount;})();(function(){TWP.Util.Cookie=function(){return{get:function(){return document.cookie;},read:function(C){if(!C){return null;}if(document.cookie.length>0){var B=C+"=";var D=document.cookie.split(";");for(var A=0;A<D.length;A++){var E=D[A];while(E.charAt(0)==" "){E=E.substring(1,E.length);if(E.indexOf(B)==0){return E.substring(B.length,E.length);}}}}return null;
},create:function(C,E,F,A,D){var B="";if(!C&&!A&&!E){return ;}if(!A){var G=new Date();G.setTime(G.getTime()+(30*24*60*60*1000));A=G;}B=C+"="+E+"; expires="+A.toGMTString();if(F){B+="; path="+F;}if(D){B="; domain="+D;}document.cookie=B;},remove:function(A){this.set(A,"",-1);}};}();})();